syntax = "proto3";
package gatekeeper.pb;

enum ConnectionType {
    FULL_NODE = 0;      // Blockchain protocols + Routing + Query
    ROUTING = 1;        // Route unicast messages
    QUERY = 2;          // Allow discovery queris
    NONE = 4;           // No communications allowed
}

message HelloRequest {
    // desired connection type
    ConnectionType conn_type = 1;
    // PBC PublicKey
    bytes node_id = 2;
}

message HelloReply {
    // enabled connection type
    ConnectionType conn_type = 1;
    // PBC PublicKey
    bytes node_id = 2;
    // List of IPs of other nodes to try to connect to
    repeated bytes other_nodes = 3;
}

message Message {
    oneof typ {
        HelloRequest request = 1;
        HelloReply reply = 2;
    }
}